tocDateLike.autoLoad="0";tocDateLike.total=0;tocDateLike.startNo=1;tocDateLike.yearNow="";tocDateLike.monthNow="";tocDateLike.toggle=function(a){var b=jQuery;b(a).next()[tocDateLike.toggleEffect]()};tocDateLike.json=function(r){var g=jQuery,p=[],m=[],q=[],e=("entry" in r.feed)?1:0,c=r.feed.entry.length,h,f,d,o,n,b,a;tocDateLike.total=!tocDateLike.total?r.feed.openSearch$totalResults.$t:tocDateLike.total;if(!e){g("#TOC-date-like").html("目前沒有文章");return}for(h=0;h<c;h++){o=r.feed.entry[h];n=o.title.$t;b=o.published.$t.substring(0,10);d=o.link.length;for(f=0;f<d;f++){if(o.link[f].rel=="alternate"){a=o.link[f].href;break}}p.push(n);q.push(b);m.push(a)}g("#tocMore").html("");if(tocDateLike.autoLoad=="0"){tocDateLike.divInit(g,p,m,q)}else{tocDateLike.main(g,p,m,q)}};tocDateLike.divInit=function(b,h,d,i){var f=i[0],e,a,g,c;tocDateLike.yearNow=e=f.substring(0,4);tocDateLike.monthNow=a=f.substring(5,7);g=tocDateLike.month[parseInt(a,10)-1];c="<div class='tocYear'>";c+="<span class='tocYearTitle' onclick='tocDateLike.toggle(this);'>"+e+"</span>";c+="<div class='tocYearToggle' id='tocYear"+e+"'>";c+="<div class='tocMonthTitle' onclick='tocDateLike.toggle(this);'>"+g+"</div>";c+="<div class='tocMonthToggle' id='tocMonth"+e+a+"'></div><div style='clear: both;'></div></div><div style='clear: both;'></div>";b("#TOC-date-like").append(c);c="<a href='http://wayne-fu.blogspot.com/2014/03/blogger-toc-date-like-sonic.html' target='_blank' style='text-decoration: none; color: #ccc;' title='Designed by WFU BLOG'>Blogger TOC sorted by date, with like count, sonic version.</a>";b("#tocInfo").html(c);tocDateLike.autoLoad="N";tocDateLike.main(b,h,d,i)};tocDateLike.main=function(g,k,e,b){var r=e.length,v=g("#TOC-date-like").next().next(),q=v.width(),d=v.is(":visible"),o=v.text(),h=v.children(),u=h.attr("href"),y=h.attr("title"),c=1,f=function(C){var z=C.length,B=0,A;for(A=0;A<z;A++){B=B+C.charCodeAt(A)}return B},t,w,n,x,s,j,m,p,a;p=f(u);a=f(y);if(!o||!u||!y||!d||q<100||p!=6238||a!=1652){c=0}for(t=0;t<r;t++){w=b[t];n=w.substring(0,4);x=w.substring(5,7);s=w.substring(8,10);if(n!=tocDateLike.yearNow){m="<div class='tocYear'>";m+="<span class='tocYearTitle' onclick='tocDateLike.toggle(this);'>"+n+"</span>";m+="<div class='tocYearToggle' id='tocYear"+n+"'></div>";m+="<div style='clear: both;'></div></div><div style='clear: both;'></div>";g("#TOC-date-like").append(m);tocDateLike.yearNow=n}if(x!=tocDateLike.monthNow){j=tocDateLike.month[parseInt(x,10)-1];x=c?x:x+1;m="<div  class='tocMonthTitle' onclick='tocDateLike.toggle(this);'>"+j+"</div>";m+="<div class='tocMonthToggle' id='tocMonth"+n+x+"'></div><div style='clear: both;'></div>";g("#tocYear"+n).append(m);tocDateLike.monthNow=x}m="<span class='tocDayNo'>["+s+"]</span>";m+="<div class='tocPost'><span class='tocPostTitle'><a href='"+e[t]+"' target='_blank'>"+k[t]+"</a></span>";m+="<span class='tocLike' id='toc"+e[t]+"'></span></div>";g("#tocMonth"+n+x).append(m);tocDateLike.like(g,e[t])}tocDateLike.startNo=tocDateLike.loadNumber+tocDateLike.startNo;if(tocDateLike.total<tocDateLike.startNo){return}if(tocDateLike.autoLoad=="N"&&tocDateLike.total>=tocDateLike.startNo){m="<span class='tocMore' onclick='tocDateLike.init($, 1)'>"+tocDateLike.loadMoreText+"</span>";m+="<span class='tocMore' onclick='tocDateLike.init($, 2)'>"+tocDateLike.loadAllText+"</span>";g("#tocMore").html(m)}if(tocDateLike.autoLoad=="Y"){tocDateLike.init(g,2)}};tocDateLike.like=function(d,b){var a="http://graph.facebook.com/?ids="+b,c;d.getJSON(a,function(e){if(e[b]&&e[b].shares){c=e[b].shares;c=c>tocDateLike.burst?tocDateLike.burstText:c;document.getElementById("toc"+b).innerHTML="<img src='"+tocDateLike.likeImg+"'/><span class='tocBurst'> "+c+"</span>"}})};tocDateLike.init=function(c,a){var b="<div style='text-align: center; margin: 0px auto'><img style='vertical-align: middle; border: none; box-shadow: none;' src='https://lh3.googleusercontent.com/-Wb95kV0ixnU/T6yfMz6PFRI/AAAAAAAACk8/Frnvk_g9dTE/s1600/Big_Flower.gif'/>&#12288;please wait...</div>";c=!c?jQuery:c;if(!a){b="<div id='tocMore'>"+b+"</div>";c("#TOC-date-like").after(b);b="<div id='tocInfo'></div>";c("#tocMore").after(b)}else{c("#tocMore").html(b)}if(a==2){tocDateLike.autoLoad="Y"}c.getScript("/feeds/posts/summary?max-results="+tocDateLike.loadNumber+"&start-index="+tocDateLike.startNo+"&alt=json-in-script&callback=tocDateLike.json")};tocDateLike.getScript=function(f,e){var d=document.createElement("script");if(d.readyState){d.onreadystatechange=function(){if(d.readyState=="loaded"||d.readyState=="complete"){d.onreadystatechange=null;if(e){e()}}}}else{d.onload=function(){if(e){e()}}}d.src=f;document.documentElement.firstChild.appendChild(d)};if(typeof jQuery==="undefined"){tocDateLike.getScript("http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js",tocDateLike.init)}else{tocDateLike.init()};